<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شـــووور | Shooor - خذ الشور من مجرّب</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; scroll-behavior: smooth; }
        .logo-font { font-weight: 900; letter-spacing: -1px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-sm border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-3xl logo-font text-blue-900">شـــووور<span class="text-orange-500 text-sm block font-normal tracking-normal text-center">Shooor</span></div>
            <a href="#customer-register" id="header-user-btn" class="bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-xs font-bold">حسابي</a>
        </div>
    </header>

    <section id="customer-register" class="py-20 bg-white px-6">
        <div class="max-w-xl mx-auto border-2 border-orange-100 p-8 rounded-[2rem] text-center shadow-lg">
            
            <div id="auth-container">
                <h2 class="text-2xl font-black text-blue-900 mb-4">انضم إلينا</h2>
                <p class="text-slate-500 mb-8 font-bold">سجل دخولك الآن لطلب استشارتك الأولى</p>
                <button onclick="loginWithGoogle()" class="w-full flex items-center justify-center gap-3 bg-white border-2 border-slate-200 py-4 rounded-2xl font-bold hover:bg-slate-50 transition-all active:scale-95 shadow-sm">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-6 h-6">
                    الدخول بواسطة Google
                </button>
            </div>

            <div id="user-profile" class="hidden">
                <div id="user-photo" class="w-24 h-24 rounded-full mx-auto border-4 border-orange-400 mb-4 overflow-hidden bg-slate-100"></div>
                <h3 id="user-name" class="text-2xl font-black text-blue-900"></h3>
                <p id="user-email" class="text-slate-400 mb-6 italic"></p>
                <div class="bg-blue-50 p-4 rounded-2xl mb-6 text-right">
                    <p class="text-xs font-bold text-blue-900">حالة الحساب: <span class="text-green-600">نشط</span></p>
                </div>
                <button onclick="handleSignOut()" class="text-red-500 text-xs font-bold hover:underline">تسجيل الخروج</button>
            </div>
            
        </div>
    </section>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <script>
        // إعداداتك من الصورة رقم 4
        const firebaseConfig = {
            apiKey: "AIzaSyAZSFCf7piwKykf_klgGlzc4RkCXumNRUg",
            authDomain: "shooor-app.firebaseapp.com",
            projectId: "shooor-app",
            storageBucket: "shooor-app.firebasestorage.app",
            messagingSenderId: "356426973132",
            appId: "1:356426973132:web:6353917bf13a64074d6769"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const provider = new firebase.auth.GoogleAuthProvider();

        function loginWithGoogle() {
            // استخدام Popup بدلاً من Redirect لتجنب مشاكل الروابط في Vercel
            auth.signInWithPopup(provider).then((result) => {
                console.log("نجح الدخول عبر النافذة المنبثقة");
            }).catch((error) => {
                console.error("خطأ:", error.message);
                // إذا فشل الـ Popup (بسبب حظر المتصفح)، نستخدم الـ Redirect كبديل
                auth.signInWithRedirect(provider);
            });
        }

        // مراقبة الحالة وتحديث الواجهة فوراً
        auth.onAuthStateChanged((user) => {
            const authContainer = document.getElementById('auth-container');
            const userProfile = document.getElementById('user-profile');
            const headerBtn = document.getElementById('header-user-btn');

            if (user) {
                authContainer.classList.add('hidden');
                userProfile.classList.remove('hidden');
                headerBtn.innerText = "ملفي الشخصي";
                document.getElementById('user-name').innerText = user.displayName;
                document.getElementById('user-email').innerText = user.email;
                if(user.photoURL) {
                    document.getElementById('user-photo').innerHTML = `<img src="${user.photoURL}" class="w-full h-full object-cover">`;
                }
            } else {
                authContainer.classList.remove('hidden');
                userProfile.classList.add('hidden');
                headerBtn.innerText = "حسابي";
            }
        });

        function handleSignOut() {
            auth.signOut().then(() => window.location.reload());
        }
    </script>
</body>
</html>
